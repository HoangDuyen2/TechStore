<html lang="en">
<html xmlns:th="https://www.thymeleaf.org">

<meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
<head th:replace="web/fragments/head :: head('TechStore - Đặt hàng')"></head>
<title>TechStore - Home</title>
<body>
<!-- header-area start -->
<div th:insert="~{web/fragments/header::header}"></div>
<!-- header end -->
<div th:insert="~{web/fragments/main_menu::main-menu}"></div>
<main>
    <!-- breadcrumb start -->
    <section class="breadcrumb-area">
        <div class="container">
            <div class="col">
                <div class="row">
                    <div class="breadcrumb-index">
                        <!-- breadcrumb-list start -->
                        <ul class="breadcrumb-ul">
                            <li class="breadcrumb-li">
                                <a class="breadcrumb-link" th:href="@{/home}">Home</a>
                            </li>
                            <li class="breadcrumb-li">
                                <span class="breadcrumb-text">Checkout</span>
                            </li>
                        </ul>
                        <!-- breadcrumb-list end -->
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- breadcrumb end -->
    <!-- checkout-area start -->
    <section class="section-pt">
        <div class="container">
            <div class="row">
                <div class="col">
                    <div class="checkout-area">
                        <div class="billing-area">
                            <form>
                                <h2 data-animate="animate__fadeInUp">Billing details</h2>
                                <p>If there is any mistake in your personal information, please change it on the
                                    personal information page.</p>
                                <div class="billing-form">
                                    <ul class="input-2">
                                        <li class="billing-li" data-animate="animate__fadeInUp">
                                            <label>First name</label>
                                            <input type="text" name="f-name"
                                                   th:value="${checkoutRequest.getFirstName()}" readonly>
                                        </li>
                                        <li class="billing-li" data-animate="animate__fadeInUp">
                                            <label>Last name</label>
                                            <input type="text" name="l-name" th:value="${checkoutRequest.getLastName()}"
                                                   readonly>
                                        </li>
                                    </ul>
                                    <ul class="billing-ul">
                                        <li class="billing-li" data-animate="animate__fadeInUp">
                                            <label>Email address</label>
                                            <input type="text" name="mail" th:value="${checkoutRequest.getEmail()}"
                                                   readonly>
                                        </li>
                                        <li class="billing-li" data-animate="animate__fadeInUp">
                                            <label>Phone number</label>
                                            <input type="text" name="phone" th:value="${checkoutRequest.getPhone()}"
                                                   readonly>
                                        </li>
                                        <li class="billing-li" data-animate="animate__fadeInUp">
                                            <label>Address</label>
                                            <input type="text" name="address" id="visible-address"
                                                   th:value="${checkoutRequest.getAddress()}">
                                        </li>
                                    </ul>
                                </div>
                            </form>
                            <div class="billing-details">
                                <form th:action="@{/apply-discount}" method="post">
                                    <h2 data-animate="animate__fadeInUp">Discount details</h2>
                                    <ul class="shipping-form pro-submit">
                                        <li class="comment-area" data-animate="animate__fadeInUp">
                                            <label>Discount code</label>
                                            <input type="text" name="discountCode"
                                                   th:value="${checkoutRequest.getDiscountCode()}">
                                        </li>
                                        <li class="comment-area" data-animate="animate__fadeInUp" th:if="${error}">
                                            <label th:text="${error}"></label>
                                        </li>
                                        <li class="comment-area" data-animate="animate__fadeInUp" th:if="${success}">
                                            <label th:text="${success}"></label>
                                        </li>

                                        <!-- Hidden fields to preserve checkout data -->
                                        <input type="hidden" name="firstName" th:value="${checkoutRequest.firstName}">
                                        <input type="hidden" name="lastName" th:value="${checkoutRequest.lastName}">
                                        <input type="hidden" name="email" th:value="${checkoutRequest.email}">
                                        <input type="hidden" name="phone" th:value="${checkoutRequest.phone}">
                                        <input type="hidden" name="address" th:value="${checkoutRequest.address}">
                                        <input type="hidden" name="totalPrice" th:value="${checkoutRequest.totalPrice}">
                                        <!-- For each existing discount, include as hidden field -->
                                        <div th:each="discount, stat : *{checkoutRequest.discounts}">
                                            <input type="hidden" th:field="*{checkoutRequest.discounts[__${stat.index}__].discountCode}" />
                                            <input type="hidden" th:field="*{checkoutRequest.discounts[__${stat.index}__].discountName}" />
                                            <input type="hidden" th:field="*{checkoutRequest.discounts[__${stat.index}__].discountValue}" />
                                        </div>
                                        <!-- Hidden inputs for products -->
                                        <div th:each="product, stat : ${checkoutRequest.productCheckouts}">
                                            <input type="hidden" th:name="'productCheckouts[' + ${stat.index} + '].id'"
                                                   th:value="${product.id}">
                                            <input type="hidden"
                                                   th:name="'productCheckouts[' + ${stat.index} + '].name'"
                                                   th:value="${product.name}">
                                            <input type="hidden"
                                                   th:name="'productCheckouts[' + ${stat.index} + '].quantity'"
                                                   th:value="${product.quantity}">
                                            <input type="hidden"
                                                   th:name="'productCheckouts[' + ${stat.index} + '].price'"
                                                   th:value="${product.price}">
                                            <input type="hidden"
                                                   th:name="'productCheckouts[' + ${stat.index} + '].image'"
                                                   th:value="${product.image}">
                                            <input type="hidden"
                                                   th:name="'productCheckouts[' + ${stat.index} + '].totalPrice'"
                                                   th:value="${product.totalPrice}">
                                        </div>

                                        <li class="comment-area" data-animate="animate__fadeInUp">
                                            <button type="submit" class="btn-style2">Apply Discount</button>
                                        </li>
                                    </ul>
                                </form>
                            </div>
                        </div>
                        <div class="order-area">
                            <div class="check-pro">
                                <h2 data-animate="animate__fadeInUp"
                                    th:text="'In your cart (' + ${checkoutRequest.getProductCheckouts().size()} + ')'"></h2>
                                <ul class="check-ul">
                                    <li data-animate="animate__fadeInUp"
                                        th:each="productCheckout : ${checkoutRequest.getProductCheckouts()}">
                                        <div class="check-pro-img">
                                            <a href="product-template.html">
                                                <img th:src="${productCheckout.getImage()}" class="img-fluid"
                                                     alt="home-pro-banner1">
                                            </a>
                                        </div>
                                        <div class="check-content">
                                            <a href="product-template.html" th:text="${productCheckout.getName()}"></a>
                                            <div class="check-qty-pric">
                                                <span class="check-qty"
                                                      th:text="${productCheckout.getQuantity()} + ' X'"></span>
                                                <span class="check-price"
                                                      th:text="${productCheckout.getPrice()}"></span>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <h2 data-animate="animate__fadeInUp">Your order</h2>
                            <ul class="order-history">
                                <li class="order-details" data-animate="animate__fadeInUp">
                                    <span>Product:</span>
                                    <span>Total</span>
                                </li>
                                <li class="order-details" data-animate="animate__fadeInUp"
                                    th:each="productCheckout : ${checkoutRequest.getProductCheckouts()}">
                                    <span th:text="${productCheckout.getName()}"></span>
                                    <span th:text="${productCheckout.getTotalPrice()}"></span>
                                </li>
                                <li class="order-details" data-animate="animate__fadeInUp"
                                    th:if="${checkoutRequest.getDiscounts() != null}"
                                    th:each="discount : ${checkoutRequest.getDiscounts()}">
                                    <span th:text="${discount.getDiscountName()}"></span>
                                    <span th:text="${discount.getDiscountValue()}"></span>
                                </li>
                                <li class="order-details" data-animate="animate__fadeInUp">
                                    <span>Shipping Charge</span>
                                    <span>Free shipping</span>
                                </li>
                                <li class="order-details" data-animate="animate__fadeInUp">
                                    <span>Total</span>
                                    <span th:text="${checkoutRequest.getTotalPrice()}"></span>
                                </li>
                            </ul>
                            <form>
                                <ul class="order-form pro-submit">
                                    <li class="label-info" data-animate="animate__fadeInUp"
                                        th:each="paymentMethod : ${paymentMethods}">
                                        <label class="box-area">
                                            <span class="text" th:text="${paymentMethod.toString()}"></span>
                                            <input type="checkbox" class="cust-checkbox">
                                            <span class="cust-check"></span>
                                        </label>
                                    </li>
                                    <li class="pay-icon" data-animate="animate__fadeInUp">
                                        <a href="javascript:void(0)"><i class="fa-solid fa-credit-card"></i></a>
                                        <a href="javascript:void(0)"><i class="fa-brands fa-cc-visa"></i></a>
                                        <a href="javascript:void(0)"><i class="fa-brands fa-cc-paypal"></i></a>
                                        <a href="javascript:void(0)"><i class="fa-brands fa-cc-mastercard"></i></a>
                                    </li>
                                </ul>
                            </form>
                            <div class="checkout-btn" data-animate="animate__fadeInUp">
                                <form th:action="@{/create-order}" method="post">
                                    <!-- Hidden fields for checkout data -->
                                    <input type="hidden" name="firstName" th:value="${checkoutRequest.firstName}">
                                    <input type="hidden" name="lastName" th:value="${checkoutRequest.lastName}">
                                    <input type="hidden" name="email" th:value="${checkoutRequest.email}">
                                    <input type="hidden" name="phone" th:value="${checkoutRequest.phone}">
                                    <input type="hidden" name="address" id="hidden-address"
                                           th:value="${checkoutRequest.address}">
                                    <input type="hidden" name="totalPrice" th:value="${checkoutRequest.totalPrice}">
                                    <input type="hidden" name="discountCode" th:value="${checkoutRequest.discountCode}">
                                    <!-- For each existing discount, include as hidden field -->
                                    <div th:each="discount, stat : *{checkoutRequest.discounts}">
                                        <input type="hidden" th:field="*{checkoutRequest.discounts[__${stat.index}__].discountCode}" />
                                        <input type="hidden" th:field="*{checkoutRequest.discounts[__${stat.index}__].discountName}" />
                                        <input type="hidden" th:field="*{checkoutRequest.discounts[__${stat.index}__].discountValue}" />
                                    </div>
                                    <input type="hidden" name="paymentMethod" id="selectedPaymentMethod">
                                    <!-- Add hidden inputs for products -->
                                    <div th:each="product, stat : ${checkoutRequest.productCheckouts}">
                                        <input type="hidden" th:name="'productCheckouts[' + ${stat.index} + '].id'"
                                               th:value="${product.id}">
                                        <input type="hidden" th:name="'productCheckouts[' + ${stat.index} + '].name'"
                                               th:value="${product.name}">
                                        <input type="hidden"
                                               th:name="'productCheckouts[' + ${stat.index} + '].quantity'"
                                               th:value="${product.quantity}">
                                        <input type="hidden" th:name="'productCheckouts[' + ${stat.index} + '].price'"
                                               th:value="${product.price}">
                                        <input type="hidden" th:name="'productCheckouts[' + ${stat.index} + '].image'"
                                               th:value="${product.image}">
                                        <input type="hidden"
                                               th:name="'productCheckouts[' + ${stat.index} + '].totalPrice'"
                                               th:value="${product.totalPrice}">
                                    </div>

                                    <button type="submit" class="btn-style2 checkout disabled" id="placeOrderBtn">Place
                                        order
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- checkout-area end -->
    <!-- news-letter start -->
    <div th:insert="~{web/fragments/newsletter::newsletter}"></div>
    <!-- news-letter end -->
</main>
<!-- main end -->
<!-- footer start -->
<div th:insert="~{web/fragments/footer::footer}"></div>
<!-- footer end -->
<!-- mobile-menu start -->
<div class="mobile-menu" id="mobile-menu">
    <div class="mobile-contents">
        <div class="menu-close">
            <button class="menu-close-btn">
                <span class="menu-close-icon"><i class="feather-x"></i></span>
            </button>
        </div>
        <div class="header-contact">
            <div class="mobilemenu-content">
                <div class="main-wrap">
                    <ul class="main-menu">
                        <li class="menu-link">
                            <a href="#menu-home" class="link-title" data-bs-toggle="collapse" aria-expanded="false">
                                <span class="sp-link-title">Home</span>
                                <span class="menu-arrow"><i class="feather-plus"></i></span>
                            </a>
                            <div class="menu-dropdown menu-single collapse" id="menu-home">
                                <ul class="ul">
                                    <li class="menusingle-li">
                                        <a href="index1.html" class="menusingle-title">
                                            <span class="sp-link-title">Home 01</span>
                                        </a>
                                    </li>
                                    <li class="menusingle-li">
                                        <a href="index2.html" class="menusingle-title">
                                            <span class="sp-link-title">Home 02</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="menu-link">
                            <a href="#menu-shop-banner" class="link-title" data-bs-toggle="collapse"
                               aria-expanded="false">
                                <span class="sp-link-title">Shop</span>
                                <span class="menu-arrow"><i class="feather-plus"></i></span>
                            </a>
                            <div class="menu-dropdown menu-banner collapse" id="menu-shop-banner">
                                <ul class="ul container p-0">
                                    <li class="menubanner-li">
                                        <div class="menubanner-img banner-hover">
                                            <a href="collection.html" class="collection-img banner-img">
                                                <img th:src="@{/web/assert/image/home1/menu-banner/menubanner-1.jpg}"
                                                     class="img-fluid" alt="menubanner-1">
                                            </a>
                                            <a href="collection.html" class="collection-title">
                                                <span>New collection</span>
                                            </a>
                                        </div>
                                    </li>
                                    <li class="menubanner-li">
                                        <div class="menubanner-img banner-hover">
                                            <a href="collection.html" class="collection-img banner-img">
                                                <img th:src="@{/web/assert/image/home1/menu-banner/menubanner-2.jpg}"
                                                     class="img-fluid" alt="menubanner-2">
                                            </a>
                                            <a href="collection.html" class="collection-title">
                                                <span>Best collection</span>
                                            </a>
                                        </div>
                                    </li>
                                    <li class="menubanner-li">
                                        <div class="menubanner-img banner-hover">
                                            <a href="collection.html" class="collection-img banner-img">
                                                <img th:src="@{/web/assert/image/home1/menu-banner/menubanner-3.jpg}"
                                                     class="img-fluid" alt="menubanner-3">
                                            </a>
                                            <a href="collection.html" class="collection-title">
                                                <span>Sale collection</span>
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="menu-link">
                            <a href="#menu-collection" class="link-title" data-bs-toggle="collapse"
                               aria-expanded="false">
                                <span class="sp-link-title">Collection</span>
                                <span class="menu-arrow"><i class="feather-plus"></i></span>
                            </a>
                            <div class="menu-dropdown menu-mega collapse" id="menu-collection">
                                <ul class="ul container p-0">
                                    <li class="menumega-li shop-li">
                                        <div class="shop-title">
                                            <a href="collection-without.html">
                                                <span class="sp-link-title">Collection</span>
                                            </a>
                                            <a href="collection.html">
                                                <span class="sp-link-title">Collection left</span>
                                            </a>
                                            <a href="collection-right.html">
                                                <span class="sp-link-title">Collection right</span>
                                            </a>
                                            <a href="collection-list-without.html">
                                                <span class="sp-link-title">Collection list</span>
                                            </a>
                                            <a href="collection-list.html">
                                                <span class="sp-link-title">Collection list left</span>
                                            </a>
                                            <a href="collection-list-right.html">
                                                <span class="sp-link-title">Collection list right</span>
                                            </a>
                                        </div>
                                    </li>
                                    <li class="menumega-li">
                                        <a href="#menu-product" class="menumega-title" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <span class="sp-link-title">Product page</span>
                                            <span class="menu-arrow"><i class="feather-plus"></i></span>
                                        </a>
                                        <div class="menumegasup-dropdown collapse" id="menu-product">
                                            <ul class="menumegasup-ul">
                                                <li class="menumegasup-li">
                                                    <a href="product-template.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Product style 1</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="product-template2.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Product style 2</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="product-template3.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Product style 3</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="product-template4.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Product style 4</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="product-template5.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Product style 5</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="product-template6.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Product style 6</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li class="menumega-li">
                                        <a href="#menu-shop1" class="menumega-title" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <span class="sp-link-title">Shop page</span>
                                            <span class="menu-arrow"><i class="feather-plus"></i></span>
                                        </a>
                                        <div class="menumegasup-dropdown collapse" id="menu-shop1">
                                            <ul class="menumegasup-ul">
                                                <li class="menumegasup-li">
                                                    <a href="cart-page.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Cart page</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="cart-empty.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Cart empty</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="wishlist-empty.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Wishlist empty</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="wishlist-product.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Wishlist product</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="return-policy.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Order & returns</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="login-account.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Manage account</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="collection.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Saved items</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li class="menumega-li">
                                        <a href="#menu-shop2" class="menumega-title" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <span class="sp-link-title">Account page</span>
                                            <span class="menu-arrow"><i class="feather-plus"></i></span>
                                        </a>
                                        <div class="menumegasup-dropdown collapse" id="menu-shop2">
                                            <ul class="menumegasup-ul">
                                                <li class="menumegasup-li">
                                                    <a href="order-history.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Order</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="profile.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Profile</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="pro-address.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Address</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="change-password.html" class="menumegasup-title">
                                                        <span class="sp-link-title">Change password</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="pro-tickets.html" class="menumegasup-title">
                                                        <span class="sp-link-title">My ticket</span>
                                                    </a>
                                                </li>
                                                <li class="menumegasup-li">
                                                    <a href="login-account.html" class="menumegasup-title">
                                                        <span class="sp-link-title">My account</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="menu-link">
                            <a href="#menu-blog" class="link-title" data-bs-toggle="collapse" aria-expanded="false">
                                <span class="sp-link-title">Blog</span>
                                <span class="menu-arrow"><i class="feather-plus"></i></span>
                            </a>
                            <div class="menu-dropdown menu-single collapse" id="menu-blog">
                                <ul class="ul">
                                    <li class="menusingle-li">
                                        <a href="blog-grid-without.html" class="menusingle-title">
                                            <span class="sp-link-title">Blog grid</span>
                                        </a>
                                    </li>
                                    <li class="menusingle-li">
                                        <a href="blog-grid.html" class="menusingle-title">
                                            <span class="sp-link-title">Blog grid left</span>
                                        </a>
                                    </li>
                                    <li class="menusingle-li">
                                        <a href="blog-grid-right.html" class="menusingle-title">
                                            <span class="sp-link-title">Blog grid right</span>
                                        </a>
                                    </li>
                                    <li class="menusingle-li">
                                        <a href="article-post-without.html" class="menusingle-title">
                                            <span class="sp-link-title">Article post</span>
                                        </a>
                                    </li>
                                    <li class="menusingle-li">
                                        <a href="article-post.html" class="menusingle-title">
                                            <span class="sp-link-title">Article post left</span>
                                        </a>
                                    </li>
                                    <li class="menusingle-li">
                                        <a href="article-post-right.html" class="menusingle-title">
                                            <span class="sp-link-title">Article post right</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="menu-link">
                            <a href="#menu-sub" class="link-title" data-bs-toggle="collapse" aria-expanded="false">
                                <span class="sp-link-title">Pages</span>
                                <span class="menu-arrow"><i class="feather-plus"></i></span>
                            </a>
                            <div class="menu-dropdown menu-sub collapse" id="menu-sub">
                                <ul class="ul">
                                    <li class="menusub-li">
                                        <a href="about-us.html" class="menusub-title">
                                            <span class="sp-link-title">About us</span>
                                        </a>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="#menu-sup-account" class="menusub-title" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <span class="sp-link-title">Account</span>
                                            <span class="menu-arrow"><i class="feather-plus"></i></span>
                                        </a>
                                        <div class="menusup-dropdown collapse" id="menu-sup-account">
                                            <ul class="menusup-ul">
                                                <li class="menusup-li">
                                                    <a href="login-account.html" class="menusup-title">
                                                        <span class="sp-link-title">Login</span>
                                                    </a>
                                                </li>
                                                <li class="menusup-li">
                                                    <a href="register.html" class="menusup-title">
                                                        <span class="sp-link-title">Register</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="billing-info.html" class="menusub-title">
                                            <span class="sp-link-title">Billing info</span>
                                        </a>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="#menu-sup-contact" class="menusub-title" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <span class="sp-link-title">Contact us</span>
                                            <span class="menu-arrow"><i class="feather-plus"></i></span>
                                        </a>
                                        <div class="menusup-dropdown collapse" id="menu-sup-contact">
                                            <ul class="menusup-ul">
                                                <li class="menusup-li">
                                                    <a href="contact-us.html" class="menusup-title">
                                                        <span class="sp-link-title">Contact us</span>
                                                    </a>
                                                </li>
                                                <li class="menusup-li">
                                                    <a href="contact-us-2.html" class="menusup-title">
                                                        <span class="sp-link-title">Contact us 2</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="#menu-sup-checkout" class="menusub-title" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <span class="sp-link-title">Checkout</span>
                                            <span class="menu-arrow"><i class="feather-plus"></i></span>
                                        </a>
                                        <div class="menusup-dropdown collapse" id="menu-sup-checkout">
                                            <ul class="menusup-ul">
                                                <li class="menusup-li">
                                                    <a href="checkout-style1.html" class="menusup-title">
                                                        <span class="sp-link-title">Checkout</span>
                                                    </a>
                                                </li>
                                                <li class="menusup-li">
                                                    <a href="checkout-style2.html" class="menusup-title">
                                                        <span class="sp-link-title">Checkout 2</span>
                                                    </a>
                                                </li>
                                                <li class="menusup-li">
                                                    <a href="checkout-style3.html" class="menusup-title">
                                                        <span class="sp-link-title">Checkout 3</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="cancellation.html" class="menusub-title">
                                            <span class="sp-link-title">Cancellation</span>
                                        </a>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="faq.html" class="menusub-title">
                                            <span class="sp-link-title">Faq's</span>
                                        </a>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="order-complete.html" class="menusub-title">
                                            <span class="sp-link-title">Order complete</span>
                                        </a>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="#menu-sup-policy" class="menusub-title" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <span class="sp-link-title">Policy</span>
                                            <span class="menu-arrow"><i class="feather-plus"></i></span>
                                        </a>
                                        <div class="menusup-dropdown collapse" id="menu-sup-policy">
                                            <ul class="menusup-ul">
                                                <li class="menusup-li">
                                                    <a href="privacy-policyt.html" class="menusup-title">
                                                        <span class="sp-link-title">Privacy policy</span>
                                                    </a>
                                                </li>
                                                <li class="menusup-li">
                                                    <a href="payment-policy.html" class="menusup-title">
                                                        <span class="sp-link-title">Payment policy</span>
                                                    </a>
                                                </li>
                                                <li class="menusup-li">
                                                    <a href="return-policy.html" class="menusup-title">
                                                        <span class="sp-link-title">Return policy</span>
                                                    </a>
                                                </li>
                                                <li class="menusup-li">
                                                    <a href="shipping-policy.html" class="menusup-title">
                                                        <span class="sp-link-title">Shipping policy</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="sitemap.html" class="menusub-title">
                                            <span class="sp-link-title">Sitemap</span>
                                        </a>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="terms-condition.html" class="menusub-title">
                                            <span class="sp-link-title">Terms & condition</span>
                                        </a>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="track-page.html" class="menusub-title">
                                            <span class="sp-link-title">Track page</span>
                                        </a>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="404.html" class="menusub-title">
                                            <span class="sp-link-title">404</span>
                                        </a>
                                    </li>
                                    <li class="menusub-li">
                                        <a href="coming-soon.html" class="menusub-title">
                                            <span class="sp-link-title">Coming soon</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="menu-link">
                            <div class="contact-num">
                                <div class="contact-wrap service-line">
                                    <span class="contact-details"><i class="feather-headphones"></i></span>
                                    <a href="tel:+2101234567890">(210) 123 456 7890</a>
                                </div>
                            </div>
                        </li>
                        <li class="menu-link">
                            <div class="contact-wrap price-tag">
                                <span class="contact-details"><i class="feather-tag"></i></span>
                                <a href="collection.html">Mega sale</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- mobile-menu end -->
<!-- cart-drawer start -->
<div th:insert="~{web/fragments/cart_drawer::cart-drawer}"></div>
<!-- cart-drawer end -->
<!-- bottom-menu start -->
<div class="bottom-menu">
    <ul class="bottom-menu-element">
        <li class="bottom-menu-wrap">
            <div class="bottom-menu-wrapper">
                <a href="index1.html" class="bottom-menu-home">
                    <span class="bottom-menu-icon"><i class="feather-home"></i></span>
                    <span class="bottom-menu-title">Home</span>
                </a>
            </div>
        </li>
        <li class="bottom-menu-wrap">
            <div class="bottom-menu-wrapper">
                <a href="account.html" class="bottom-menu-user">
                    <span class="bottom-menu-icon"><i class="feather-user"></i></span>
                    <span class="bottom-menu-title">Account</span>
                </a>
            </div>
        </li>
        <li class="bottom-menu-wrap">
            <div class="bottom-menu-wrapper">
                <a href="collection.html" class="bottom-menu-collection">
                    <span class="bottom-menu-icon"><i class="feather-grid"></i></span>
                    <span class="bottom-menu-title">Shop</span>
                </a>
            </div>
        </li>
        <li class="bottom-menu-wrap">
            <div class="bottom-menu-wrapper">
                <a href="wishlist.html" class="bottom-menu-wishlist">
                            <span class="bottom-menu-icon-wrap">
                                <span class="bottom-menu-icon"><i class="feather-heart"></i></span>
                                <span class="bottom-menu-counter wishlist-counter">5</span>
                            </span>
                    <span class="bottom-menu-title">Wishlist</span>
                </a>
            </div>
        </li>
        <li class="bottom-menu-wrap">
            <div class="bottom-menu-wrapper">
                <a href="javascript:void(0)" class="bottom-menu-cart">
                            <span class="bottom-menu-icon-wrap">
                                <span class="bottom-menu-icon"><i class="feather-shopping-bag"></i></span>
                                <span class="bottom-menu-counter cart-counter">4</span>
                            </span>
                    <span class="bottom-menu-title">Cart</span>
                </a>
            </div>
        </li>
    </ul>
</div>
<!-- bottom-menu end -->
<!-- fullscreen start -->
<div class="bg-screen"></div>
<!-- fullscreen end -->
<!-- back-to-top start -->
<a href="javascript:void(0)" id="top" class="scroll"><span><i class="feather-arrow-up"></i></span></a>
<!-- back-to-top end -->
<!-- plugin js -->
<script th:src="@{/web/assert/js/plugin.js}"></script>
<!-- theme js -->
<script th:src="@{/web/assert/js/main.js}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const paymentCheckboxes = document.querySelectorAll('.cust-checkbox');
        const placeOrderBtn = document.getElementById('placeOrderBtn');
        const selectedPaymentMethodInput = document.getElementById('selectedPaymentMethod');

        paymentCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function () {
                // Uncheck other checkboxes
                paymentCheckboxes.forEach(cb => {
                    if (cb !== checkbox) cb.checked = false;
                });

                // Enable button and set payment method
                if (checkbox.checked) {
                    const paymentMethod = checkbox.closest('.label-info').querySelector('.text').textContent;
                    selectedPaymentMethodInput.value = paymentMethod;
                    placeOrderBtn.classList.remove('disabled');
                } else {
                    selectedPaymentMethodInput.value = '';
                    placeOrderBtn.classList.add('disabled');
                }
            });
        });
    });
</script>
<script>
    // Add this to your checkout page JavaScript
    document.addEventListener('DOMContentLoaded', function () {
        // Get the form that submits the order
        const orderForm = document.querySelector('form[action*="create-order"]');

        // Get the address input field (assuming it has id="address" or name="address")
        const addressInput = document.querySelector('input[name="address"]');

        // Before form submission, make sure the address is included
        orderForm.addEventListener('submit', function (event) {
            // Check if there's a separate address field that needs to be synced
            const billingAddressField = document.querySelector('.billing-area input[name="address"]');

            if (billingAddressField && billingAddressField.value) {
                // Update the address field in the main form
                let hiddenAddressField = orderForm.querySelector('input[name="address"]');

                // If no hidden field exists, create one
                if (!hiddenAddressField) {
                    hiddenAddressField = document.createElement('input');
                    hiddenAddressField.type = 'hidden';
                    hiddenAddressField.name = 'address';
                    orderForm.appendChild(hiddenAddressField);
                }

                // Set the value from the billing address field
                hiddenAddressField.value = billingAddressField.value;
            }
        });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Get the discount form
        const discountForm = document.querySelector('form[action*="/apply-discount"]');

        if (discountForm) {
            discountForm.addEventListener('submit', function(event) {
                // Get the entered discount code
                const discountCodeInput = discountForm.querySelector('input[name="discountCode"]');
                const newDiscountCode = discountCodeInput.value.trim();

                if (!newDiscountCode) {
                    return; // No discount code entered, let form submit normally
                }

                // Get all existing discount codes from hidden fields
                const existingDiscountInputs = document.querySelectorAll('input[name$=".discountCode"]');
                let isDuplicate = false;

                existingDiscountInputs.forEach(input => {
                    if (input.value.trim().toLowerCase() === newDiscountCode.toLowerCase()) {
                        isDuplicate = true;
                    }
                });

                // If duplicate found, prevent form submission and show message
                if (isDuplicate) {
                    event.preventDefault();

                    // Create or find error message element
                    let errorElement = document.querySelector('#discount-error-message');
                    if (!errorElement) {
                        errorElement = document.createElement('div');
                        errorElement.id = 'discount-error-message';
                        errorElement.style.color = 'red';
                        errorElement.style.marginTop = '10px';
                        discountCodeInput.parentNode.appendChild(errorElement);
                    }

                    errorElement.textContent = 'This discount code has already been applied';
                }
            });
        }
    });
</script>
</body>
</html>